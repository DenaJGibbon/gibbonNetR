---
title: "gibbonNetR: R Package for the Use of CNNs and Transfer Learning on Acoustic Data"
author: "Dena J. Clink"
date: "`r Sys.Date()`"
output: github_document
---

## Overview

This readme provides instructions and code for training and testing a deep learning model on spectrogram images. 

```{r, message=FALSE}
devtools::load_all("/Users/denaclink/Desktop/RStudioProjects/gibbonNetR")
```

## Location of Spectrogram Images

### Training Data Path:

```{r}
input.data.path <-  c('/Users/denaclink/Desktop/RStudioProjects/Multi-species-detector/data/imagesmalaysiaHQ/')
```

### Testing Data Path:

```{r}
test.data.path <- c('/Users/denaclink/Desktop/RStudioProjects/Multi-species-detector/data/imagesmalaysiamaliau/')
```

## Parameters for Training

### Training Data Folder Short Name:

```{r}
trainingfolder.short <- 'imagesmalaysiaHQ'
```

### Unfreezing Layers:

```{r}
unfreeze.param <- TRUE  # FALSE means the features are frozen; TRUE unfrozen
```

### Number of Epoch Iterations:

```{r}
epoch.iterations <- c(1,2,3,4,5,20)
```

### Location to Save the Output:

```{r}
output.data.path <-paste('data/','output','unfrozen',unfreeze.param,trainingfolder.short,'/', sep='_')
dir.create(output.data.path)
```

### Early Stopping:

```{r}
early.stop <- 'yes'  # NOTE: Currently only early stopping available
```

## Training the models using gibbonNetR and evaluating on a test set

```{r,eval = FALSE}
gibbonNetR::train_alexnet(input.data.path=input.data.path,
                          test.data.path=test.data.path,
                          unfreeze = TRUE,
                          epoch.iterations=epoch.iterations,
                          early.stop = "yes",
                          output.base.path = "data/",
                          trainingfolder.short=trainingfolder.short)
```

## Extracting Performance Data

```{r}
performancetables.dir <- 'data/_output_unfrozen_TRUE_imagesmalaysiaHQ_/performance_tables/'
PerformanceOutput <- gibbonNetR::get_best_performance(performancetables.dir=performancetables.dir)
```

### Displaying Performance Plots

```{r}
PerformanceOutput$f1_plot
PerformanceOutput$pr_plot
```

## Repeat the Training (if required)



